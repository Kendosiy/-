<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<link href="../../style.css" rel="stylesheet">
	</head>
	<body>
		<header>
			<div>
				<a href="../../index.html"><h1>Учебный портал</h1></a>
			</div>
			<nav>
					<ul class="main_menu">
					<li>
						<a href="#"><p>Справочные материалы</p></a>
						<ul class="submenu" id="sub1">
							<li><a href="../../delphi-lab-teor.html">Теория по Delphi</a></li>
						</ul>
					</li>
					<li>
						<a href="#"><p>Лабораторные работы</p></a>
						<ul class="submenu" id="sub2">
							<li><a href="../../delphi-lab-prac.html">Задания по Delphi</a></li>
						</ul>
					</li>
				</ul>
			</nav>
		</header>
		<main>
			<div class="prev"><a href="tema1.html"><img src="../../res/prev.png"></a></div>
			<div class="next"><a href="tema5.html"><img src="../../res/next.png"></a></div>
			<aside id="sidebar">
				<h2>Быстрая навигация</h2>
				<ol>
					<li><a href="#1">Структура проекта</a></li>
					<li><a href="#2">Структура модуля</a></li>
					<li><a href="#3">Создание обработчиков события</a></li>
				</ol>
			</aside>
			<article class="tema">
				<a name="1"></a>
				<h2>Структура проекта</h2>
				<p>Итак, при запуске Delphi мы с вами видим уже открытый новый 
				проект для создания приложения. Давайте запустим его на выполнение. 
				Это можно сделать в любом окне IDE нажатием на кнопку F9, выбрав 
				соответствующий пункт "Run" в меню "Run" или выбором одноцветной 
				кнопки на панели инструментов. 
				Происходит сравнительно недолгий процесс компиляции 
				(преобразование удобочитаемых для вас данных в удобочитаемую форму 
				для компьютера), в результате которого 
				создается EXE файл. Далее этот файл, в случае успешного создания, 
				запускается на выполнение. Во время выполнения из множества окон 
				Delphi остается только главное 
				окно и окно редактора кода.</p>
				<p>Практически ничего не делая, вы создали собственную программу. 
				Эта программа имеет вид стандартного Windows-окна с заголовком 
				Form1, со стандартными кнопками: свернуть, на весь экран, закрыть. 
				Его можно позиционировать, изменять размер. По умолчанию она 
				отображается в том же виде, что и во время разработки, имеет те же 
				размеры и позицию на экране.</p>
				<p>Закроем запущенную программу. Delphi автоматически переводит 
				окна в то состояние, которое было до запуска проекта на 
				выполнение. Снова на экране появляется инспектор объектов и 
				редактор формы.</p>
				<p>Для избежания отображения ненужных окон во время запуска 
				проекта, я рекомендую установить опцию автоматического свертывания 
				всего Delphi со своими окнами в панель задач. Войдите в меню 
				Tools, выберите пункт Environment Options и на вкладке Preferences 
				установите галочку Minimize on run (минимизировать при запуске). 
				Далее Ok. Теперь попробуйте снова запустить проект на выполнение. 
				Теперь вам ничего не мешает лицезреть свое творение.</p>
				<p>Теперь попробуем сохранить проект на диске. Настоятельно 
				рекомендую сохранять на диске новый проект сразу, поскольку он 
				находится в памяти компьютера, и вы понимаете, какие могут быть 
				последствия, если пропадет электричество или ваш компьютер решит 
				немного отдохнуть от работы. Сохраняем все файлы проекта. Для 
				этого выбираем пункт Save All, находящийся в меню File. Delphi 
				предлагает сохранить модуль программы Unit1 как: Сохраним его под 
				этим же названием, что и предлагается. Замечание: сколько 
				существует окон в вашей программе, столько и будет модулей 
				(Unit). Поэтому имеет смысл сохранять каждый проект в отдельный 
				каталог. Особенно, если у вас много окон в программе. Далее будет 
				предложено сохранить проект как: т.е. задать название всего 
				проекта. Как будет называться проект, под таким же именем и будут 
				создаваться исполняемые EXE файлы. Названия файлов должны состоять 
				из одного слова или слов, написанных английскими буквами, цифры 
				допустимы только начиная со второго символа, пробелы - недопустимы 
				(используйте в таких случаях знак подчеркивания).</p>
				<p>
					Перечень сохраняемых при этом файлов на диске:
					<ul>
						<li>DPR - файл проекта. Содержит он основной код 
						программы, ссылки на все окна (формы) проекта и 
						относящиеся к ним модули. В нем также содержится код 
						инициализации. Имеет одноименное название с проектом.</li>
						<li>PAS - pascal файл. Он содержит текст, который вы 
						видите в окне редактора кода так называемого модуля 
						программы.</li>
						<li>DFM - delphi form. Представляет собой файл с полными 
						данными о проектировщике формы. Позиция, размер, 
						расположенные компоненты и пр. Форма приложения является 
						неотъемлемой частью модуля PAS и имеет то же название.</li>
						<li>DCU - двоичный файл модуля. Имеет одноименное название
						с модулем.</li>
						<li>RES - ресурсный файл. Содержит в себе иконки, значки 
						указателя мыши, картинки, звуки.</li>
						<li>DOF, DSK - содержат настройки проекта.</li>
						<li>CFG - содержит настройки конфигурации проекта.</li>
						<li>EXE - откомпилированная программа. Сохраняется 
						автоматически при запуске проекта на выполнение. 
						Обновляется в момент компиляции. Имеет одноименное 
						название проекта. Полностью самостоятельное приложение.</li>
					</ul>
					По ходу работы в среде Delphi могут автоматически создаваться 
					файлы, имеющие расширение, начинающееся символом ~. Это 
					резервные копии файлов, которые создаются при их повторном 
					сохранении.
				</p>
				<a name="2"></a>
				<h2>Структура модуля</h2>
				<p>Модули - это программные единицы, предназначенные для 
				размещения фрагментов программ. С помощью содержащегося в них 
				программного кода решается поставленная пользователем задача.
				Модуль обычно соответствует своей форме, т.е. у каждой формы есть 
				программный модуль. Могут существовать модули без формы.</p>
				<p>
					Любой модуль имеет следующую структуру:<br><br>
					<code>
						unit Unit1;
						<br><br>
						interface<br>
						// Секция интерфейсных объявлений
						<br><br>
						implementation<br>
						// Секция реализации
						<br><br>
						end.
					</code><br><br>
					Заголовок открывается зарезервированным словом unit, за 
					которым следует имя модуля и точка с запятой. Секция 
					интерфейсных объявлений открывается зарезервированным словом 
					interface, а секция реализации - словом implementation. 
					Терминатором модуля, как и терминатором программы, является 
					end с точкой. 
				</p>
				<p>В секции интерфейсных объявлений описываются программные 
				эле¬менты (типы, классы, процедуры и функции), которые будут 
				«видны» другим программным модулям. В этом же разделе 
				перечисляются те модули, которые используются
				этим модулем для работы. Их имена следуют за словом uses. Большую 
				часть нужных модулей D. подключает автоматически. В этой секции 
				объявляются глобальные переменные, поцедуры и функции.</p>
				<p>В секции реализации раскрывается ме¬ханизм работы элементов 
				модуля. Она содержит объявление локальных процедур, функций и 
				переменных, поддерживающих работу формы. 
				В начале раздела располагается директива {$R*.dfm}, которая 
				указывает компилятору, что в раздел реализаций нужно вставить 
				установки значений свойств формы, находящиеся в файле с 
				расширением .dfm, имя которого совпадает с именем модуля.
				За директивой располагаются реализации всех процедур и функций 
				модуля. 
				В разделе реализаций могут быть также инициирующая и завершающая 
				части. Инициирующая часть содержит операторы, выполняющиеся до 
				передачи управления основной программе в самом начале работы. Она 
				начинается словом initialization. Операторы завершающей части 
				выполняются в конце работы программы. Завершающая часть начинается 
				служебным словом finalization.</p>
				<a name="3"></a>
				<h2>Создание обработчиков события</h2>
				<p>
				Проектируемая форма или окно, которое будет видеть пользователь при запуске
				программы на выполнение, по умолчанию называется <b>Form1</b>. Перед
				расположением на ней кнопок, давайте его назовем как-нибудь по-русски. 
				Например: ;<em>Это моя программа</em>!;. Это можно
				сделать в инспекторе объектов (<b>Object Inspector</b>). Там отображаются
				свойства выбранных компонентов на форме. Поскольку на форме ничего пока нет, то
				выбранной считается сама форма <b>Form1</b> (выбранный элемент можно увидеть в
				самом верху инспектора объектов в ниспадающем списке). Меняем заголовок
				проектируемой формы. Свойство <b>Caption</b> на страничке свойств <b>Properties</b>.
				Пишем в редактируемом поле правее фразу заголовка. Во время ввода названия
				обратите внимание - набираемый текст немедленно в точности повторяется на
				форме. Об этом и говорилось в прошлом уроке. Мы с вами видим результат своей
				работы еще до запуска программы на выполнение.<br>
				<br>
				Если во время работы вас стесняют размеры окон инспектора объектов,
				проектируемой формы, редактора кода или они наоборот, выглядят великовато,
				поменяйте их размеры, отпозиционируйте в удобное место.<br>
				<br>
				Далее поместим на нашу проектируемую форму три стандартные кнопки. Выбираем на
				листообразной палитре компонентов компонент под названием <b>Button</b>
				одинарным щелчком мышки. Вот как от выглядит <img width=28 height=28
				src="_3_Создание%20обработчиков%20событий.files/image001.gif"><br>
				<br>
				Примечание: при подведении мышки на палитру компонентов выскакивает всплывающая
				подсказка, объясняющая пользователю ее название.<br>
				<br>
				Итак, мы щелкнули по этому компоненту и он остался нажатым. Теперь необходимо
				щелкнуть на нашей форме, где мы хотели бы эту кнопку оставить. Повторите эту
				операцию еще два раза, пока на форме не окажется три кнопки Button1, Button2,
				Button3. Попробуйте подвигать эти кнопки по форме при нажатой левой клавишей
				мышки. Установите их в произвольном порядке, но чтобы они не мешали друг другу.<br>
				<br>
				Теперь назовем эти кнопки по их дальнейшему функциональному назначению. Щелкаем
				один раз (!) по кнопке <b>Button1</b>. Она оказывается выделенной. В инспекторе
				объектов моментально отображаются все доступные свойства для этой кнопки.
				Меняем название кнопки, как вы догадываетесь, тоже сменой свойства <b>Caption</b>.
				Пишем: ;Свернуть;. Далее выбираем кнопку <b>Button2</b>.
				Переименовываем ее в ;Белая;. Повторим операцию смены названия для
				третьей кнопки ;Закрыть;.<br>
				<br>
				Внешний вид программы готов. Как вы убедились - нет ничего сложного в
				оформлении внешнего вида проектируемой формы-окна. Пока что ваши действия в
				написании программы можно сравнить с художником, который мазками своей кисти
				постепенно вырисовывает картину. Да, но эту картину можно в любой момент
				подкорректировать.<br>
				<br>
				Теперь немного поработаем руками и головой.<br>
				Для начала рассмотрим поподробнее такое понятие, как реакции на события.<br>
				<br>
				Реакция на события. Что же это такое? Допустим, вы запустили любую программу на
				выполнение. Сами того не зная, вы породили кучу событий, передаваемых этому
				приложению. Во первых до непосредственного создания любого окна в памяти,
				Windows посылает сообщение приложению: ;окно сейчас будет создано;.
				Или такие: ;Окно сейчас будет активизировано;, ;Окно сейчас
				отобразится;. Но на простом примере, непосредственно касающегося нас,
				скажу, когда вы нажимаете на любую кнопку, Windows посылает сообщение
				приложению: ;По такой-то кнопке щелкнули;. И если программист
				использовал это сообщение и написал реакцию на него, то программа выполнит ее.<br>
				<br>
				Напишем реакцию нажатия на кнопку Button3 или ;Закрыть;. Дважды
				щелкаем по этой кнопке. Delphi автоматически подготавливает редактор кода для
				минимизации ввода данных с клавиатуры, набирая за нас заголовок процедуры
				реакции нажатия на кнопку. Вот он:<br>
				<br>
				<b>procedure</b> TForm1.Button3Click(Sender: TObject);<br>
				<b>begin</b><br>
				<br>
				<b>end; <br>
				</b><br>
				Указатель (курсор) находится между словом begin и end. Именно там и напишем
				команду программного закрытия окна, аналогично действию системной кнопки в
				заголовке окна. Поскольку это окно единственное и главное, то будет закрыта и
				вся программа. <br>
				<br>
				Если действие касается окна, а его имя Form1, то указываем ссылку на это окно.
				Имя, но не текст, который оно отображает. Имя - это свойство Name. <br>
				<br>
				Набираем вручную Form1. Теперь надо добраться до вложенных в него свойств и
				процедур. Для этого ставим точку. Через несколько секунд Delphi Выводит для нас
				дополнение кода.<br>
				<img width=459 height=206
				src="_3_Создание%20обработчиков%20событий.files/image002.gif"><br>
				<br>
				Это подобие списка доступных констант, переменных, функций для данного объекта
				(Form1). Набираем Close. Обратите внимание, дополнение кода помогает в наборе,
				и указывает на существующую функцию, выбрав в списке слово Close. Если этот
				случай касается сравнительно длинных названий, то выбрать необходимое можно в
				списке стрелками перемещения указателя или мышкой. Завершение ввода из списка
				дополнения кода осуществляется нажатием на кнопку Enter, точка, точка с
				запятой, пробел, открывающаяся скобка (в зависимости от ситуации). Мы поставим
				точку с запятой. Итак наше описание реакции на нажатия на кнопку
				;Закрыть; выглядит следующим образом:<br>
				<br>
				<b>Form1.Close;</b><br>
				<br>
				Если нажать на эту кнопку, в момент работы программы конечно, это окно
				закроется. Напишем реакции на нажатия на другие кнопки Button1 и Button2.<br>
				<br>
				Рассмотрим еще один компонент Application. Это особый компонент. Его свойства
				недоступны для инспектора объектов потому, что он доступен только во время
				запуска приложения на выполнение и следовательно его нет на палитре
				компонентов. Application - это ссылка (или переменная) на ваше работающее
				приложение. Delphi автоматически создает данный компонент в связи с его
				обязательным присутствием.<br>
				<br>
				Первая наша кнопка ;Свернуть; или Button1 должна осуществлять свертывание
				проекта в панель задач. Поэтому пишем реакцию на ее нажатие. Дважды щелкаем по
				ней. В редакторе кода пишем, используя знания написания команд предыдущего
				случая.<br>
				<br>
				<b>Application.Minimize;</b><br>
				<br>
				Для кнопки ;Белая; реакция нажатия выглядит как:<br>
				<br>
				<b>Form1.Color:=clWhite;</b><br>
				<br>
				<br>
				Что же произойдет при нажатии на эту кнопку. Окно программы окрасится в белый
				цвет. Для этого в свойство Color компонента программы <b>Form1</b> заносится
				константа белого цвета. По желанию можно поэкспериментировать с другими
				цветами, поставив в форму еще несколько кнопок и задавая цвет при нажатия на
				них <b>clBlack</b>, <b>clNavy</b> и т.п. (перечень всех доступных цветов см.
				свойство Color в Object Inspector, и не забудьте для этого выбрать форму <b>Form1</b>
				одинарным щелчком).<br>
				<br>
				Если нажать на кнопку ;Свернуть;, то программа свернется в панель
				задач.</p>

			</article>	
		</main>
		<footer class="footer">
			<div></div>
		</footer>
		<script src="../../scripts.js"></script>
	</body>
</html>